timezone: "US/Eastern"

# currently cephfs and nfs storage backends supported
shared_storage: True
storage_backend: "nfs"

### STORAGE DIRECTORY CONFIG
data_mount_root: "/puddle"
media_directory: ''
backup_directory: "backups"
www_directory: "public_html"
surveillance_directory: "surveillance"
git_directory: "git"
configs_directory: "configs"
automation_directory: "automation"

### FILESERVER CONFIGS
afp_ldap_auth: False
postgres_default_db: 'home-assistant'

### MEDIA SERVER CONFIGS

media_root: '{{ data_mount_root }}'
plex_ramfs_transcode: False
ramfs_transcode_path: /transcode
ramfs_size_mb: 8192

# Plex Server
plex_server_ip: 192.168.10.60
plex_username: jeff240sx
plex_password: "{{ vault_plex_password }}"
plex_token: "{{ vault_plex_token }}"


vault_ssl_private_key: "{{ vault_majormisanthropy_ssl_private_key }}"
vault_ssl_certificate: "{{ vault_majormisanthropy_ssl_certificate  }}"
ssl_certificate: "/etc/ssl/certs/majormisanthropy.com.pem"
ssl_private_key: "/etc/ssl/private/majormisanthropy.com.key"


### WEB SERVER CONFIGS

www_domain: 'home.example.com'
www_vhost: '{{ ansible_hostname }}.{{ www_domain }}'
www_aliases: '{{ www_domain }}'
www_admin_email: 'admin@{{ www_domain }}'
www_options: "-Indexes -FollowSymLinks"
www_allow_override: "None"

www_dos_whitelist:
  - 'localhost'
  - '127.0.0.1'
  - '192.168.*.*'

www_dos_hash_table_size: 3097
www_dos_page_count: 20
www_dos_site_count: 200
www_dos_page_interval: 1
www_dos_site_interval: 1
www_dos_blocking_period: 60
www_dos_log_dir: "/var/log/apache2/mod_evasive.log"

apache_vhosts:
  - servername: webservices.home.majormisanthropy.com
    serveralias: webservices
    serverlisten: 80
    extra_parameters: |
      <Location /server-status>
        SetHandler server-status
        Require ip 10.0.0.0/8
        Require host home.majormisanthropy.com localhost
      </Location>
  - servername: sonarr.home.majormisanthropy.com
    serverlisten: 80
    extra_parameters: |
      SecRuleEngine Off
      ProxyPreserveHost on
      ProxyPass / http://192.168.10.70:8180/ connectiontimeout=60 timeout=60 retry=5 keepalive=On disablereuse=On
      ProxyPassReverse / http://192.168.10.70:8180/
  - servername: radarr.home.majormisanthropy.com
    serverlisten: 80
    extra_parameters: |
      SecRuleEngine Off
      ProxyPreserveHost on
      ProxyPass / http://192.168.10.70:8183/ connectiontimeout=60 timeout=60 retry=5 keepalive=On disablereuse=On
      ProxyPassReverse / http://192.168.10.70:8183/
  - servername: sabnzbd.home.majormisanthropy.com
    serverlisten: 80
    extra_parameters: |
      SecRuleEngine Off
      ProxyPreserveHost on
      ProxyPass / http://192.168.10.70:8181/ connectiontimeout=60 timeout=60 retry=5 keepalive=On disablereuse=On
      ProxyPassReverse / http://192.168.10.70:8181/
  - servername: ombi.home.majormisanthropy.com
    serverlisten: 80
    extra_parameters: |
      SecRuleEngine Off
      ProxyPreserveHost on
      ProxyPass / http://192.168.10.70:3579/ connectiontimeout=60 timeout=60 retry=5 keepalive=On disablereuse=On
      ProxyPassReverse / http://192.168.10.70:3579/
  - servername: tautulli.home.majormisanthropy.com
    serverlisten: 80
    extra_parameters: |
      SecRuleEngine Off
      ProxyPreserveHost on
      ProxyPass / http://192.168.10.60:8181/ connectiontimeout=60 timeout=60 retry=5 keepalive=On disablereuse=On
      ProxyPassReverse / http://192.168.10.60:8181/
  - servername: plex.home.majormisanthropy.com
    serverlisten: 80
    extra_parameters: |
      SecRuleEngine Off
      ProxyPreserveHost on
      ProxyPass / http://192.168.10.60:32400/ connectiontimeout=60 timeout=60 retry=5 keepalive=On disablereuse=On
      ProxyPassReverse / http://192.168.10.60:32400/
  - servername: stats.home.majormisanthropy.com
    serverlisten: 80
    extra_parameters: |
      SecRuleEngine Off
      ProxyPreserveHost on
      ProxyPass / http://192.168.10.137:3000/ connectiontimeout=60 timeout=60 retry=5 keepalive=On disablereuse=On
      ProxyPassReverse / http://192.168.10.137:3000/


apache_vhosts_ssl:
  - servername: webservices.home.majormisanthropy.com
    serveralias: webservices
    serverlisten: 443
    sslcertcontent: '{{ vault_majormisanthropy_ssl_certificate }}'
    sslkeycontent: '{{ vault_majormisanthropy_ssl_private_key }}'
    sslcertfile: "/etc/ssl/certs/majormisanthropy.com.pem"
    sslkeyfile: "/etc/ssl/private/majormisanthropy.com.key"
    extra_parameters: |
      <Location /server-status>
        SetHandler server-status
        Require ip 10.0.0.0/8
        Require host home.majormisanthropy.com localhost
      </Location>
  - servername: sabnzbd.home.majormisanthropy.com
    serverlisten: 443
    sslcertcontent: '{{ vault_majormisanthropy_ssl_certificate }}'
    sslkeycontent: '{{ vault_majormisanthropy_ssl_private_key }}'
    sslcertfile: "/etc/ssl/certs/majormisanthropy.com.pem"
    sslkeyfile: "/etc/ssl/private/majormisanthropy.com.key"
    extra_parameters: |
      SecRuleEngine Off
      ProxyPreserveHost on
      ProxyPass / http://192.168.10.70:8181/ connectiontimeout=60 timeout=60 retry=5 keepalive=On disablereuse=On
      ProxyPassReverse / http://192.168.10.70:8181/
  - servername: sonarr.home.majormisanthropy.com
    serverlisten: 443
    sslcertcontent: '{{ vault_majormisanthropy_ssl_certificate }}'
    sslkeycontent: '{{ vault_majormisanthropy_ssl_private_key }}'
    sslcertfile: "/etc/ssl/certs/majormisanthropy.com.pem"
    sslkeyfile: "/etc/ssl/private/majormisanthropy.com.key"
    extra_parameters: |
      SecRuleEngine Off
      ProxyPreserveHost on
      ProxyPass / http://192.168.10.70:8180/ connectiontimeout=60 timeout=60 retry=5 keepalive=On disablereuse=On
      ProxyPassReverse / http://192.168.10.70:8180/
  - servername: radarr.home.majormisanthropy.com
    serverlisten: 443
    sslcertcontent: '{{ vault_majormisanthropy_ssl_certificate }}'
    sslkeycontent: '{{ vault_majormisanthropy_ssl_private_key }}'
    sslcertfile: "/etc/ssl/certs/majormisanthropy.com.pem"
    sslkeyfile: "/etc/ssl/private/majormisanthropy.com.key"
    extra_parameters: |
      SecRuleEngine Off
      ProxyPreserveHost on
      ProxyPass / http://192.168.10.70:8183/ connectiontimeout=60 timeout=60 retry=5 keepalive=On disablereuse=On
      ProxyPassReverse / http://192.168.10.70:8183/
  - servername: ombi.home.majormisanthropy.com
    serverlisten: 443
    sslcertcontent: '{{ vault_majormisanthropy_ssl_certificate }}'
    sslkeycontent: '{{ vault_majormisanthropy_ssl_private_key }}'
    sslcertfile: "/etc/ssl/certs/majormisanthropy.com.pem"
    sslkeyfile: "/etc/ssl/private/majormisanthropy.com.key"
    extra_parameters: |
      SecRuleEngine Off
      ProxyPreserveHost on
      ProxyPass / http://192.168.10.70:3579/ connectiontimeout=60 timeout=60 retry=5 keepalive=On disablereuse=On
      ProxyPassReverse / http://192.168.10.70:3579/
  - servername: tautulli.home.majormisanthropy.com
    serverlisten: 443
    sslcertcontent: '{{ vault_majormisanthropy_ssl_certificate }}'
    sslkeycontent: '{{ vault_majormisanthropy_ssl_private_key }}'
    sslcertfile: "/etc/ssl/certs/majormisanthropy.com.pem"
    sslkeyfile: "/etc/ssl/private/majormisanthropy.com.key"
    extra_parameters: |
      SecRuleEngine Off
      ProxyPreserveHost on
      ProxyPass / http://192.168.10.60:8181/ connectiontimeout=60 timeout=60 retry=5 keepalive=On disablereuse=On
      ProxyPassReverse / http://192.168.10.60:8181/
  - servername: plex.home.majormisanthropy.com
    serverlisten: 443
    sslcertcontent: '{{ vault_majormisanthropy_ssl_certificate }}'
    sslkeycontent: '{{ vault_majormisanthropy_ssl_private_key }}'
    sslcertfile: "/etc/ssl/certs/majormisanthropy.com.pem"
    sslkeyfile: "/etc/ssl/private/majormisanthropy.com.key"
    extra_parameters: |
      SecRuleEngine Off
      ProxyPreserveHost on
      ProxyPass / http://192.168.10.60:32400/ connectiontimeout=60 timeout=60 retry=5 keepalive=On disablereuse=On
      ProxyPassReverse / http://192.168.10.60:32400/
  - servername: stats.home.majormisanthropy.com
    serverlisten: 443
    sslcertcontent: '{{ vault_majormisanthropy_ssl_certificate }}'
    sslkeycontent: '{{ vault_majormisanthropy_ssl_private_key }}'
    sslcertfile: "/etc/ssl/certs/majormisanthropy.com.pem"
    sslkeyfile: "/etc/ssl/private/majormisanthropy.com.key"
    extra_parameters: |
      SecRuleEngine Off
      ProxyPreserveHost on
      ProxyPass / http://192.168.10.137:3000/ connectiontimeout=60 timeout=60 retry=5 keepalive=On disablereuse=On
      ProxyPassReverse / http://192.168.10.137:3000/


ssh_users:
  ajanis:
    password: "{{vault_ajanis_pw}}"
    cn: "Alan Janis"
    givenname: "Alan"
    sn: "Janis"
    mail: "alan.janis@gmail.com"
    gecos: ajanis
    uid: 1043
    gid: 1042
    pubkey: >
      ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC29plb9A6fagU+g+zFX6Bo6SUGj58Z/6nxngV/kd95J0UJc8c3zApz6Q3s6gO1+86rpHoZOKauUnXb/Kcg41ncpluDsLxu1gChY8D8jsAPxG18GxlJuB8d5rgFdX9VnCWNg4w9VuYvwv3n/7hoELyU/oC68to3VIIB4yLMGhuGY3JOqwmpckl1/NhQZCeP+BTXyEib2GjJ4jqbpKXuId8/gp3UpHQ37enLF8eLHH7ue4+TxL1F1uSw3phkqLvhRWPdsYTP4ttfcReqOLpJet87yUiO0xKsUryBuCAngeSUP4hYGJT8i3RbGSvyoXoLJEGIt7hFLP7dI78WPlOUIHHXNml62UKF3c8mFww4qRB95RRWTrILSftkjlHqFSIVxXNtS+AMggc60HT8L8zi5BhHg66PHAo/4JWLmnfgfdMbEqpWxxa21RhTv0LySXs1IOWspXAseNWrxBCrmdxPudMPXSG6f4Gc7STs72MTWQ/0ti6rOsgMvspLshM+wWJ6L0dLRUbti+hHBcdja/6J5MrOMUzgzT+VLmJG4cNP2dAfqseW6t92B9RGP1rICja5PTrIvy0kh6lyVkxnkWlC10WJo2m+VyifPjIPBkekJDfKic9VKe05glMWl8lUillQ0Y9kejFzoLXX8rfbdTmCJYg3qXTrZ4lsZQjr8dGSI4HMqw== ajanis@wwt
    state: present
  media:
    password: "{{vault_media_pw}}"
    cn: "Media User"
    givenname: "Media"
    sn: "User"
    mail: "jeff240sx@gmail.com"
    gecos: media
    uid: 2000
    gid: 2000
    pubkey: >
      ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC29plb9A6fagU+g+zFX6Bo6SUGj58Z/6nxngV/kd95J0UJc8c3zApz6Q3s6gO1+86rpHoZOKauUnXb/Kcg41ncpluDsLxu1gChY8D8jsAPxG18GxlJuB8d5rgFdX9VnCWNg4w9VuYvwv3n/7hoELyU/oC68to3VIIB4yLMGhuGY3JOqwmpckl1/NhQZCeP+BTXyEib2GjJ4jqbpKXuId8/gp3UpHQ37enLF8eLHH7ue4+TxL1F1uSw3phkqLvhRWPdsYTP4ttfcReqOLpJet87yUiO0xKsUryBuCAngeSUP4hYGJT8i3RbGSvyoXoLJEGIt7hFLP7dI78WPlOUIHHXNml62UKF3c8mFww4qRB95RRWTrILSftkjlHqFSIVxXNtS+AMggc60HT8L8zi5BhHg66PHAo/4JWLmnfgfdMbEqpWxxa21RhTv0LySXs1IOWspXAseNWrxBCrmdxPudMPXSG6f4Gc7STs72MTWQ/0ti6rOsgMvspLshM+wWJ6L0dLRUbti+hHBcdja/6J5MrOMUzgzT+VLmJG4cNP2dAfqseW6t92B9RGP1rICja5PTrIvy0kh6lyVkxnkWlC10WJo2m+VyifPjIPBkekJDfKic9VKe05glMWl8lUillQ0Y9kejFzoLXX8rfbdTmCJYg3qXTrZ4lsZQjr8dGSI4HMqw== ajanis@wwt
    state: present


ssh_groups:
  admin:
    description: Administrators Group
    gid: 1042
    members:
      - ajanis
  users:
    description: SSH Users Group
    gid: 2002
    members:
      - ajanis
  media:
    description: Media Services Group
    gid: 2000
    members:
      - ajanis
      - media

sshd_permit_root_login: 'yes'

# InfluxDB
influxdb_server_ip: 192.168.10.137

# Telegraf
telegraf_influxdb_urls:
  - "http://{{ influxdb_server_ip }}:8086"

# Grafana
grafana_api_token: "{{ vault_grafana_api_token }}"
