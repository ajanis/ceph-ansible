timezone: "America/Denver"

### MAAS CONFIGS
maas_use_ssl: True

# currently cephfs and nfs storage backends supported
shared_storage: True
storage_backend: "cephfs"
use_ldap_automount: True


### STORAGE DIRECTORY CONFIG
data_mount_root: "/data"
media_directory: ""
www_directory: "public_html"
backup_directory: "backups"
ldap_user_home_directory: "homedirs"
surveillance_directory: "surveillance"
git_directory: "git"
network_directory: "network"
configs_directory: "configs"
automation_directory: "automation"
automation_mounted_directory: "{{ data_mount_root }}/{{ automation_directory }}"
ftpusers_directory: "{{ data_mount_root }}/ftp"
ftp_config_directory: '{{ ftpusers_directory }}/config'

### FILESERVER CONFIGS
afp_ldap_auth: True

### LDAP SERVER CONFIG

#The ldif file
openldap_server_domain_name: "ldap.home.prettybaked.com"
openldap_server_ip: "10.0.10.15"
openldap_server_rootpw: "{{ vault_openldap_server_rootpw }}"
openldap_server_enable_ssl: false

ssl_privkey: "{{ vault_prettybaked_com_ssl_private_key }}"
ssl_keypath: "/etc/ssl/private/{{ www_domain }}.key"
ssl_certchain: "{{ vault_prettybaked_com_ssl_certificate }}"
ssl_certpath: "/etc/ssl/certs/{{ www_domain }}.crt"

### MEDIA SERVER CONFIGS
media_root: "{{ data_mount_root }}"
media_user_uid: "{{ ssh_users.media.uid }}"
media_user_gid: "{{ ssh_users.media.gid }}"
usenet_incomplete_download_directory: /downloads/usenet/incomplete
usenet_complete_download_directory: /downloads/usenet/complete
usenet_watch_directory: /downloads/usenet/watch
plex_ramfs_transcode: True
ramfs_transcode_path: /transcode
ramfs_size_mb: 8192
plex_server_ip: 10.0.10.175
plex_username: devicenull
plex_password: "{{ vault_plex_password }}"
plex_token: "{{ vault_plex_token }}"


## SSH CONFIGS

sshd_permit_root_login: 'yes'

ssh_users:
  ajanis:
    password: "{{ vault_ajanis_pw }}"
    cn: "Alan Janis"
    givenname: "Alan"
    sn: "Janis"
    mail: "alan.janis@gmail.com"
    shell: /bin/bash
    gecos: ajanis
    uid: 1043
    gid: 1042
    pubkey: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC29plb9A6fagU+g+zFX6Bo6SUGj58Z/6nxngV/kd95J0UJc8c3zApz6Q3s6gO1+86rpH\
    oZOKauUnXb/Kcg41ncpluDsLxu1gChY8D8jsAPxG18GxlJuB8d5rgFdX9VnCWNg4w9VuYvwv3n/7hoELyU/oC68to3VIIB4yLMGhuGY3JOqwmpckl1/\
    NhQZCeP+BTXyEib2GjJ4jqbpKXuId8/gp3UpHQ37enLF8eLHH7ue4+TxL1F1uSw3phkqLvhRWPdsYTP4ttfcReqOLpJet87yUiO0xKsUryBuCAngeSU\
    P4hYGJT8i3RbGSvyoXoLJEGIt7hFLP7dI78WPlOUIHHXNml62UKF3c8mFww4qRB95RRWTrILSftkjlHqFSIVxXNtS+AMggc60HT8L8zi5BhHg66PHAo\
    /4JWLmnfgfdMbEqpWxxa21RhTv0LySXs1IOWspXAseNWrxBCrmdxPudMPXSG6f4Gc7STs72MTWQ/0ti6rOsgMvspLshM+wWJ6L0dLRUbti+hHBcdja/\
    6J5MrOMUzgzT+VLmJG4cNP2dAfqseW6t92B9RGP1rICja5PTrIvy0kh6lyVkxnkWlC10WJo2m+VyifPjIPBkekJDfKic9VKe05glMWl8lUillQ0Y9ke\
    jFzoLXX8rfbdTmCJYg3qXTrZ4lsZQjr8dGSI4HMqw== ajanis@wwt"
    state: present
  tglenn:
    password: "{{ vault_tglenn_pw }}"
    cn: "Teagan Glenn"
    givenname: "Teagan"
    sn: "Glenn"
    mail: "teagan.m.glenn@gmail.com"
    gecos: tglenn
    shell: /bin/bash
    uid: 1042
    gid: 1042
    pubkey: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDLrWcrJDrq/7TLMqTTzIj3CqvthxxBFFwioafSDj0BaEy5e9gr3lYMjKuVMjMjA8h2RT\
    gaXipoR6o2funSamHQ+li52QTlLLFAFgJXT3Rv2UscOAr+iNh22ka+PGnScwYNEEgmjeXcjRqpaeg2nDp0aVv0aCNvDji6u3s4bAr/ZopbwOzUVP9x8\
    nrUCcXQvPGZxh2sPP5x1YUBa6AqSHk37c1zbHOzQPTcFmtjgzMSDkY464vqlEhb/AFzf/dwISGA27n/VqJkIV9wum8pt9fVNW/yco6X4ZBbOZTrcxwp\
    Bs70iLa3JcOsJhuE1hPxjYKjj3vGXSXTWJ2ZS8aZqK9n tglenn@mbp.int.teagantotally.rock"
    state: present
  svela:
    password: "{{ vault_svela_pw }}"
    cn: "Sebastian Vela"
    givenname: "Sebastian"
    sn: "Vela"
    mail: "vela.sebastian@gmail.com"
    gecos: svela
    uid: 1044
    gid: 2002
    pubkey: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC29plb9A6fagU+g+zFX6Bo6SUGj58Z/6nxngV/kd95J0UJc8c3zApz6Q3s6gO1+86rpH\
    oZOKauUnXb/Kcg41ncpluDsLxu1gChY8D8jsAPxG18GxlJuB8d5rgFdX9VnCWNg4w9VuYvwv3n/7hoELyU/oC68to3VIIB4yLMGhuGY3JOqwmpckl1/\
    NhQZCeP+BTXyEib2GjJ4jqbpKXuId8/gp3UpHQ37enLF8eLHH7ue4+TxL1F1uSw3phkqLvhRWPdsYTP4ttfcReqOLpJet87yUiO0xKsUryBuCAngeSU\
    P4hYGJT8i3RbGSvyoXoLJEGIt7hFLP7dI78WPlOUIHHXNml62UKF3c8mFww4qRB95RRWTrILSftkjlHqFSIVxXNtS+AMggc60HT8L8zi5BhHg66PHAo\
    /4JWLmnfgfdMbEqpWxxa21RhTv0LySXs1IOWspXAseNWrxBCrmdxPudMPXSG6f4Gc7STs72MTWQ/0ti6rOsgMvspLshM+wWJ6L0dLRUbti+hHBcdja/\
    6J5MrOMUzgzT+VLmJG4cNP2dAfqseW6t92B9RGP1rICja5PTrIvy0kh6lyVkxnkWlC10WJo2m+VyifPjIPBkekJDfKic9VKe05glMWl8lUillQ0Y9ke\
    jFzoLXX8rfbdTmCJYg3qXTrZ4lsZQjr8dGSI4HMqw== ajanis@wwt"
    state: present
  jeasey:
    password: "{{ vault_jeasey_pw }}"
    cn: "Jeff Easey"
    givenname: "Jeff"
    sn: "Easey"
    mail: "jeff240sx@gmail.com"
    gecos: jeasey
    uid: 1045
    gid: 2002
    pubkey: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC29plb9A6fagU+g+zFX6Bo6SUGj58Z/6nxngV/kd95J0UJc8c3zApz6Q3s6gO1+86rpH\
    oZOKauUnXb/Kcg41ncpluDsLxu1gChY8D8jsAPxG18GxlJuB8d5rgFdX9VnCWNg4w9VuYvwv3n/7hoELyU/oC68to3VIIB4yLMGhuGY3JOqwmpckl1/\
    NhQZCeP+BTXyEib2GjJ4jqbpKXuId8/gp3UpHQ37enLF8eLHH7ue4+TxL1F1uSw3phkqLvhRWPdsYTP4ttfcReqOLpJet87yUiO0xKsUryBuCAngeSU\
    P4hYGJT8i3RbGSvyoXoLJEGIt7hFLP7dI78WPlOUIHHXNml62UKF3c8mFww4qRB95RRWTrILSftkjlHqFSIVxXNtS+AMggc60HT8L8zi5BhHg66PHAo\
    /4JWLmnfgfdMbEqpWxxa21RhTv0LySXs1IOWspXAseNWrxBCrmdxPudMPXSG6f4Gc7STs72MTWQ/0ti6rOsgMvspLshM+wWJ6L0dLRUbti+hHBcdja/\
    6J5MrOMUzgzT+VLmJG4cNP2dAfqseW6t92B9RGP1rICja5PTrIvy0kh6lyVkxnkWlC10WJo2m+VyifPjIPBkekJDfKic9VKe05glMWl8lUillQ0Y9ke\
    jFzoLXX8rfbdTmCJYg3qXTrZ4lsZQjr8dGSI4HMqw== ajanis@wwt"
    state: present
  media:
    password: "{{ vault_media_pw }}"
    cn: "Media User"
    givenname: "Media"
    sn: "User"
    mail: "alan.janis@gmail.com"
    gecos: media
    uid: 2000
    gid: 2000
    pubkey: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC29plb9A6fagU+g+zFX6Bo6SUGj58Z/6nxngV/kd95J0UJc8c3zApz6Q3s6gO1+86rpH\
    oZOKauUnXb/Kcg41ncpluDsLxu1gChY8D8jsAPxG18GxlJuB8d5rgFdX9VnCWNg4w9VuYvwv3n/7hoELyU/oC68to3VIIB4yLMGhuGY3JOqwmpckl1/\
    NhQZCeP+BTXyEib2GjJ4jqbpKXuId8/gp3UpHQ37enLF8eLHH7ue4+TxL1F1uSw3phkqLvhRWPdsYTP4ttfcReqOLpJet87yUiO0xKsUryBuCAngeSU\
    P4hYGJT8i3RbGSvyoXoLJEGIt7hFLP7dI78WPlOUIHHXNml62UKF3c8mFww4qRB95RRWTrILSftkjlHqFSIVxXNtS+AMggc60HT8L8zi5BhHg66PHAo\
    /4JWLmnfgfdMbEqpWxxa21RhTv0LySXs1IOWspXAseNWrxBCrmdxPudMPXSG6f4Gc7STs72MTWQ/0ti6rOsgMvspLshM+wWJ6L0dLRUbti+hHBcdja/\
    6J5MrOMUzgzT+VLmJG4cNP2dAfqseW6t92B9RGP1rICja5PTrIvy0kh6lyVkxnkWlC10WJo2m+VyifPjIPBkekJDfKic9VKe05glMWl8lUillQ0Y9ke\
    jFzoLXX8rfbdTmCJYg3qXTrZ4lsZQjr8dGSI4HMqw== ajanis@wwt"
    state: present
  automation:
    password: "{{ vault_automation_pw }}"
    cn: "Automation User"
    givenname: "Automation"
    sn: "User"
    mail: "teagan.m.glenn@gmail.com"
    gecos: automation
    uid: 2001
    gid: 2001
    pubkey: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC29plb9A6fagU+g+zFX6Bo6SUGj58Z/6nxngV/kd95J0UJc8c3zApz6Q3s6gO1+86rpH\
    oZOKauUnXb/Kcg41ncpluDsLxu1gChY8D8jsAPxG18GxlJuB8d5rgFdX9VnCWNg4w9VuYvwv3n/7hoELyU/oC68to3VIIB4yLMGhuGY3JOqwmpckl1/\
    NhQZCeP+BTXyEib2GjJ4jqbpKXuId8/gp3UpHQ37enLF8eLHH7ue4+TxL1F1uSw3phkqLvhRWPdsYTP4ttfcReqOLpJet87yUiO0xKsUryBuCAngeSU\
    P4hYGJT8i3RbGSvyoXoLJEGIt7hFLP7dI78WPlOUIHHXNml62UKF3c8mFww4qRB95RRWTrILSftkjlHqFSIVxXNtS+AMggc60HT8L8zi5BhHg66PHAo\
    /4JWLmnfgfdMbEqpWxxa21RhTv0LySXs1IOWspXAseNWrxBCrmdxPudMPXSG6f4Gc7STs72MTWQ/0ti6rOsgMvspLshM+wWJ6L0dLRUbti+hHBcdja/\
    6J5MrOMUzgzT+VLmJG4cNP2dAfqseW6t92B9RGP1rICja5PTrIvy0kh6lyVkxnkWlC10WJo2m+VyifPjIPBkekJDfKic9VKe05glMWl8lUillQ0Y9ke\
    jFzoLXX8rfbdTmCJYg3qXTrZ4lsZQjr8dGSI4HMqw== ajanis@wwt"
    state: present
  bkoebler:
    password: "{{ vault_bkoebler_pw }}"
    cn: "Bryan Koebler"
    givenname: "Bryan"
    sn: "Koebler"
    mail: "bjkcubed@phasedeux.com"
    gecos: bkoebler
    uid: 1046
    gid: 2002
    pubkey: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC29plb9A6fagU+g+zFX6Bo6SUGj58Z/6nxngV/kd95J0UJc8c3zApz6Q3s6gO1+86rpH\
    oZOKauUnXb/Kcg41ncpluDsLxu1gChY8D8jsAPxG18GxlJuB8d5rgFdX9VnCWNg4w9VuYvwv3n/7hoELyU/oC68to3VIIB4yLMGhuGY3JOqwmpckl1/\
    NhQZCeP+BTXyEib2GjJ4jqbpKXuId8/gp3UpHQ37enLF8eLHH7ue4+TxL1F1uSw3phkqLvhRWPdsYTP4ttfcReqOLpJet87yUiO0xKsUryBuCAngeSU\
    P4hYGJT8i3RbGSvyoXoLJEGIt7hFLP7dI78WPlOUIHHXNml62UKF3c8mFww4qRB95RRWTrILSftkjlHqFSIVxXNtS+AMggc60HT8L8zi5BhHg66PHAo\
    /4JWLmnfgfdMbEqpWxxa21RhTv0LySXs1IOWspXAseNWrxBCrmdxPudMPXSG6f4Gc7STs72MTWQ/0ti6rOsgMvspLshM+wWJ6L0dLRUbti+hHBcdja/\
    6J5MrOMUzgzT+VLmJG4cNP2dAfqseW6t92B9RGP1rICja5PTrIvy0kh6lyVkxnkWlC10WJo2m+VyifPjIPBkekJDfKic9VKe05glMWl8lUillQ0Y9ke\
    jFzoLXX8rfbdTmCJYg3qXTrZ4lsZQjr8dGSI4HMqw== ajanis@wwt"
    state: present

ssh_groups:
  admin:
    description: Administrators Group
    gid: 1042
    members:
      - ajanis
      - tglenn
  users:
    description: SSH Users Group
    gid: 2002
    members:
      - ajanis
      - tglenn
      - svela
      - jeasey
      - bkoebler
  media:
    description: Media Services Group
    gid: 2000
    members:
      - ajanis
      - tglenn
      - media
  automation:
    description: Automation Services Group
    gid: 2001
    members:
      - ajanis
      - tglenn
      - automation

# Postgres
postgres_default_db: "home-assistant"

# InfluxDB
influxdb_server_ip: 10.0.10.152
influxdb_install_python_client: True
prometheus_scrape_configs:
  - job_name: "prometheus"
    scrape_interval: 5s
    scrape_timeout: 5s
    metrics_path: "{{ prometheus_metrics_path }}"
    static_configs:
      - targets:
        - "{{ ansible_fqdn | default(ansible_host) | default('localhost') }}:9090"
  - job_name: "node"
    scrape_interval: 5s
    scrape_timeout: 5s
    static_configs:
      - targets:
        - "{{ ansible_fqdn | default(ansible_host) | default('localhost') }}:9100"
  - job_name: ceph_exporter
    scrape_interval: 5s
    scrape_timeout: 5s
    static_configs:
      - targets:
        - 'ceph01.home.prettybaked.com:9283'
        labels:
          alias: "ceph-exporter"
  - job_name: "unifi_exporter"
    scrape_interval: 5s
    scrape_timeout: 5s
    static_configs:
      - targets:
        - "10.0.10.142:9130"
        labels:
          alias: "unifi-exporter"
  - job_name: "ceph01"
    scrape_interval: 5s
    scrape_timeout: 5s
    static_configs:
      - targets:
        - ceph01.home.prettybaked.com:9100
        labels:
          instance: ceph01
  - job_name: "ceph02"
    scrape_interval: 5s
    scrape_timeout: 5s
    static_configs:
      - targets:
        - ceph02.home.prettybaked.com:9100
        labels:
          instance: ceph02
  - job_name: "ceph03"
    scrape_interval: 5s
    scrape_timeout: 5s
    static_configs:
      - targets:
        - ceph03.home.prettybaked.com:9100
        labels:
          instance: ceph03
  - job_name: "ceph04"
    scrape_interval: 5s
    scrape_timeout: 5s
    static_configs:
      - targets:
        - ceph04.home.prettybaked.com:9100
        labels:
          instance: ceph04

# Telegraf
telegraf_influxdb_urls:
  - "http://{{ influxdb_server_ip }}:8086"

telegraf_install_url: "https://dl.influxdata.com/telegraf/nightlies/telegraf_nightly_amd64.deb"

telegraf_runas_user: root
telegraf_runas_group: root

telegraf_agent_interval: 5s
telegraf_round_interval: "true"
telegraf_metric_batch_size: "1000"
telegraf_metric_buffer_limit: "10000"
percpu:
telegraf_collection_jitter: 2s
telegraf_flush_interval: 10s
telegraf_flush_jitter: 5s
telegraf_debug: "true"
telegraf_quiet: "false"
telegraf_influxdb_database: telegraf
telegraf_influxdb_precision: ms

# Grafana
grafana_api_token: "{{ vault_grafana_api_token }}"
grafana_url: https://stats.prettybaked.com
grafana_enable_auth_ldap: True
grafana_enable_auth_anonymous: True

grafana_enable_smtp: True
grafana_smtp_host: "smtp.gmail.com"
grafana_smtp_port: 587
grafana_smtp_user: "eddie.heartofgold.galaxy@gmail.com"
grafana_smtp_password: "{{ vault_eddie_gmail_password }}"
grafana_smtp_from_address: "eddie.heartofgold.galaxy@gmail.com"
grafana_smtp_from_name: "Grafana Alerts"


# Ubiquiti
unifi_admin_site: "{{ www_domain }}"
unifi_admin_host: "unifi-admin.{{ www_domain }}"
unifi_admin_user: ajanis
unifi_admin_password: "{{ vault_unifi_admin_password }}"
unms_enable_ssl: True
unifi_enable_ssl: True
unifi_config_directory: "{{ data_mount_root }}/{{ configs_directory }}/unifi"
unifi_exporter_config_directory: "{{ data_mount_root }}/{{ configs_directory }}/unifi_exporter"
unifi_snmp_v3_username: telegraf
unifi_snmp_v3_password: "{{ vault_unifi_snmp_v3_password }}"
### WEB SERVER CONFIGS
www_domain: 'home.prettybaked.com'

nginx_user: "media"
nginx_group: "media"
nginx_default_servername: "{{ www_domain }} www.prettybaked.com prettybaked.com"
nginx_default_docroot: "{{ data_mount_root }}/{{ www_directory }}"

fail2ban_enable: True

fail2ban_bantime: "-1" #Permanent ban
fail2ban_findtime: "10m"
fail2ban_maxretry: "2"
fail2ban_usedns: "raw"
fail2ban_logtarget: /var/log/fail2ban.log
fail2ban_banaction: urltable
fail2ban_pfsense_ip: "10.0.10.1"
fail2ban_pfsense_user: fail2ban
fail2ban_urltable_file: "{{ data_mount_root }}/{{ www_directory }}/fail2ban.txt"
fail2ban_ssh_private_key: "{{ vault_fail2ban_ssh_private_key }}"

fail2ban_services:
  - name: nginx-http-auth
    enabled: True
    filter: nginx-http-auth
    port: http,https
    logpath: /var/log/nginx/home*.log
  - name: nginx-noscript
    enabled: True
    filter: nginx-noscript
    port: http,https
    logpath: /var/log/nginx/home*.log
  - name: nginx-badbots
    enabled: True
    filter: nginx-badbots
    port: http,https
    logpath: /var/log/nginx/home*.log
  - name: nginx-botsearch
    enabled: True
    filter: nginx-botsearch
    port: http,https
    logpath: /var/log/nginx/home*.log
  - name: nginx-nohome
    enabled: True
    filter: nginx-nohome
    port: http,https
    logpath: /var/log/nginx/home*.log
  - name: nginx-404
    enabled: True
    filter: nginx-404
    port: http,https
    logpath: /var/log/nginx/home*.log
  - name: nginx-401
    enabled: True
    filter: nginx-401
    port: http,https
    findtime: '1m'
    bantime: '5m'
    maxretry: 3
    logpath:
      - /var/log/nginx/ombi*.log
      - /var/log/nginx/plex*.log
      - /var/log/nginx/tautulli*.log
      - /var/log/nginx/stats*.log
      - /var/log/nginx/ci*.log
      - /var/log/nginx/repo*.log
      - /var/log/nginx/eddie*.log

nginx_proxy_cache_regex: '~* (^/(photo|media|image|images|mediacover|pms_image_proxy)|\.(?:jpg|jpeg|gif|png|ico|cur|gz|svg|svgz|mp4|ogg|ogv|webm|htc|css|js)$)'

nginx_backends:

  - service: automation
    servers:
      - 10.0.11.42:8123

  - service: sabnzbd
    servers:
      - 10.0.10.177:8181

  - service: ombi
    servers:
      - 10.0.10.177:3579

  - service: sonarr
    servers:
      - 10.0.10.177:8180

  - service: radarr
    servers:
      - 10.0.10.177:8183

  - service: radarr4k
    servers:
      - 10.0.10.177:8184

  - service: grafana
    servers:
      - 10.0.10.152:3000

  - service: tautulli
    servers:
      - 10.0.10.175:8181

  - service: bazarr
    servers:
      - 10.0.10.177:6767

  - service: plex
    servers:
      - 10.0.10.175:32400

  - service: ci
    servers:
      - 10.0.10.79:8080

  - service: repo
    servers:
      - 10.0.10.79:9000

  - service: tts
    servers:
      - 10.0.11.110:59125

  - service: rhasspy
    servers:
      - 10.0.11.110:12101

  - service: eddie
    servers:
      - 10.0.11.42:80

nginx_vhosts:
  - servername: "home.prettybaked.com"
    serveralias: "prettybaked.com www.prettybaked.com {{ ansible_eth0.ipv4.address }}"
    serverlisten: "80 default_server"
    locations:
      - name: /
        docroot: "{{ data_mount_root }}/{{ www_directory }}"
        extra_parameters: |
          fancyindex on;
          fancyindex_localtime on; #on for local time zone. off for GMT
          fancyindex_exact_size off; #off for human-readable. on for exact size in bytes
          fancyindex_header "/fancyindex/header.html";
          fancyindex_footer "/fancyindex/footer.html";
          fancyindex_ignore "fancyindex"; #ignore this directory when showing list
          fancyindex_ignore "iot_firewall_allow.txt";
          fancyindex_ignore "fail2ban.txt";
          fancyindex_ignore "robots.txt";

  - servername: ci.home.prettybaked.com
    serveralias: ci
    serverlisten: 80
    locations:
      - name: /
        proxy: True
        backend: ci

  - servername: tts.home.prettybaked.com
    serveralias: tts
    serverlisten: 80
    locations:
      - name: /
        proxy: True
        backend: tts

  - servername: rhasspy.home.prettybaked.com
    serveralias: rhasspy
    serverlisten: 80
    locations:
      - name: /
        proxy: True
        backend: rhasspy

  - servername: repo.home.prettybaked.com
    serveralias: repo
    serverlisten: 80
    locations:
      - name: /
        proxy: True
        backend: repo

  - servername: automation.home.prettybaked.com
    serveralias: automation
    serverlisten: 80
    locations:
      - name: /
        proxy: True
        backend: automation
        extra_parameters: |
          proxy_http_version         1.1;
          proxy_set_header       Connection          "upgrade";
          proxy_set_header        upgrade             $http_upgrade;
      - name: /api/websocket
        proxy: True
        backend: automation/api/websocket
        extra_parameters: |
          proxy_http_version         1.1;
          proxy_set_header       Connection          "upgrade";
          proxy_set_header        upgrade             $http_upgrade;

  - servername: sabnzbd.home.prettybaked.com
    serveralias: sabnzbd
    serverlisten: 80
    locations:
      - name: /
        proxy: True
        backend: sabnzbd
        custom_css: sabnzbd_dark.css

  - servername: sonarr.home.prettybaked.com
    serveralias: sonarr
    serverlisten: 80
    locations:
      - name: /
        proxy: True
        proxy_cache: True
        backend: sonarr
        custom_css: sonarr/dark.css
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        proxy_cache: True
        backend: sonarr

  - servername: radarr.home.prettybaked.com
    serveralias: radarr
    serverlisten: 80
    locations:
      - name: /
        proxy: True
        backend: radarr
        proxy_cache: True
        custom_css: radarr/dark.css
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        proxy_cache: True
        backend: radarr

  - servername: radarr4k.home.prettybaked.com
    serveralias: radarr4k
    serverlisten: 80
    locations:
      - name: /
        proxy: True
        backend: radarr4k
        proxy_cache: True
        custom_css: radarr/dark.css
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        proxy_cache: True
        backend: radarr4k

  - servername: bazarr.home.prettybaked.com
    serveralias: bazarr
    serverlisten: 80
    locations:
      - name: /
        proxy: True
        backend: bazarr
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        backend: bazarr
        proxy_cache: True

  - servername: ombi.home.prettybaked.com
    serveralias: ombi
    serverlisten: 80
    locations:
      - name: /
        proxy: True
        backend: ombi
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        proxy_cache: True
        backend: ombi

  - servername: tautulli.home.prettybaked.com
    serveralias: tautulli
    serverlisten: 80
    locations:
      - name: /
        proxy: True
        backend: tautulli
        proxy_cache: False
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        proxy_cache: True
        backend: tautulli

  - servername: plex.home.prettybaked.com
    serveralias: plex
    serverlisten: 80
    locations:
      - name: /
        proxy: True
        backend: plex
        custom_css: plex/dark.css
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        proxy_cache: True
        backend: plex

  - servername: stats.home.prettybaked.com
    serveralias: stats
    serverlisten: 80
    locations:
      - name: /
        proxy: True
        backend: grafana
        custom_css: grafana/graforg.css
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        backend: grafana
        proxy_cache: True
      - name: favicon.ico
        docroot: "{{ nginx_default_docroot }}"
        proxy: True
        backend: grafana
        proxy_cache: True

  - servername: eddie.home.prettybaked.com
    serveralias: eddie
    serverlisten: 80
    locations:
      - name: /
        proxy: True
        backend: eddie
        proxy_cache: True

  - servername: "home.prettybaked.com"
    serveralias: "prettybaked.com www.prettybaked.com {{ ansible_eth0.ipv4.address }}"
    serverlisten: "8080 default_server"
    locations:
      - name: /
        docroot: "{{ data_mount_root }}/{{ www_directory }}"
        extra_parameters: |
          fancyindex on;
          fancyindex_localtime on; #on for local time zone. off for GMT
          fancyindex_exact_size off; #off for human-readable. on for exact size in bytes
          fancyindex_header "/fancyindex/header.html";
          fancyindex_footer "/fancyindex/footer.html";
          fancyindex_ignore "fancyindex"; #ignore this directory when showing list
          fancyindex_ignore "iot_firewall_allow.txt";
          fancyindex_ignore "fail2ban.txt";
          fancyindex_ignore "robots.txt";

  - servername: ci.prettybaked.com
    serveralias: ci
    serverlisten: 8080
    locations:
      - name: /
        proxy: True
        backend: ci

  - servername: repo.prettybaked.com
    serveralias: repo
    serverlisten: 8080
    locations:
      - name: /
        proxy: True
        backend: repo

  - servername: automation.prettybaked.com
    serveralias: automation
    serverlisten: 8080
    locations:
      - name: /
        proxy: True
        backend: automation
        extra_parameters: |
          proxy_http_version         1.1;
          proxy_set_header       Connection          "upgrade";
          proxy_set_header        upgrade             $http_upgrade;
      - name: /api/websocket
        proxy: True
        backend: automation/api/websocket
        extra_parameters: |
          proxy_http_version         1.1;
          proxy_set_header       Connection          "upgrade";
          proxy_set_header        upgrade             $http_upgrade;
  - servername: ombi.prettybaked.com
    serveralias: ombi
    serverlisten: 8080
    locations:
      - name: /
        proxy: True
        backend: ombi
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        proxy_cache: True
        backend: ombi

  - servername: tautulli.prettybaked.com
    serveralias: tautulli
    serverlisten: 8080
    locations:
      - name: /
        proxy: True
        backend: tautulli
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        proxy_cache: True
        backend: tautulli

  - servername: plex.prettybaked.com
    serveralias: plex
    serverlisten: 8080
    locations:
      - name: /
        proxy: True
        proxy_cache: True
        backend: plex
        custom_css: plex/dark.css
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        proxy_cache: True
        backend: plex

  - servername: stats.prettybaked.com
    serveralias: stats
    serverlisten: 8080
    locations:
      - name: /
        proxy: True
        backend: grafana
        custom_css: grafana/graforg.css
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        backend: grafana
        proxy_cache: True
      - name: favicon.ico
        docroot: "{{ nginx_default_docroot }}"
        proxy: True
        backend: grafana
        proxy_cache: True


nginx_vhosts_ssl:
  - servername: "home.prettybaked.com"
    serveralias: "prettybaked.com www.prettybaked.com"
    serverlisten: "443 default_server"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        docroot: "{{ data_mount_root }}/{{ www_directory }}"
        extra_parameters: |
          fancyindex on;
          fancyindex_localtime on; #on for local time zone. off for GMT
          fancyindex_exact_size off; #off for human-readable. on for exact size in bytes
          fancyindex_header "/fancyindex/header.html";
          fancyindex_footer "/fancyindex/footer.html";
          fancyindex_ignore "fancyindex"; #ignore this directory when showing list
          fancyindex_ignore "iot_firewall_allow.txt";
          fancyindex_ignore "fail2ban.txt";
          fancyindex_ignore "robots.txt";

  - servername: ci.home.prettybaked.com
    serverlisten: "443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        backend: ci

  - servername: eddie.home.prettybaked.com
    serverlisten: "443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        backend: eddie

  - servername: tts.home.prettybaked.com
    serverlisten: "443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        backend: tts

  - servername: rhasspy.home.prettybaked.com
    serverlisten: "443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        backend: rhasspy

  - servername: repo.home.prettybaked.com
    serverlisten: "443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        backend: repo

  - servername: automation.home.prettybaked.com
    serverlisten: "443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        backend: automation
        extra_parameters: |
          proxy_http_version         1.1;
          proxy_set_header       Connection          "upgrade";
          proxy_set_header        upgrade             $http_upgrade;
      - name: /api/websocket
        proxy: True
        backend: automation/api/websocket
        extra_parameters: |
          proxy_http_version         1.1;
          proxy_set_header       Connection          "upgrade";
          proxy_set_header        upgrade             $http_upgrade;
  - servername: sabnzbd.home.prettybaked.com
    serverlisten: "443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        backend: sabnzbd
        custom_css: sabnzbd_dark.css

  - servername: sonarr.home.prettybaked.com
    serverlisten: "443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        proxy_cache: True
        backend: sonarr
        custom_css: sonarr/dark.css
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        proxy_cache: True
        backend: sonarr

  - servername: radarr.home.prettybaked.com
    serverlisten: "443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        proxy_cache: True
        backend: radarr
        custom_css: radarr/dark.css
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        proxy_cache: True
        backend: radarr

  - servername: radarr4k.home.prettybaked.com
    serverlisten: "443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        proxy_cache: True
        backend: radarr4k
        custom_css: radarr/dark.css
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        proxy_cache: True
        backend: radarr4k

  - servername: bazarr.home.prettybaked.com
    serverlisten: "443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        backend: bazarr
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        backend: bazarr
        proxy_cache: True

  - servername: ombi.home.prettybaked.com
    serverlisten: "443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        backend: ombi
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        proxy_cache: True
        backend: ombi

  - servername: tautulli.home.prettybaked.com
    serverlisten: "443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        proxy_cache: False
        backend: tautulli
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        proxy_cache: True
        backend: tautulli

  - servername: plex.home.prettybaked.com
    serverlisten: "443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        proxy_cache: True
        backend: plex
        custom_css: plex/dark.css
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        proxy_cache: True
        backend: plex

  - servername: stats.home.prettybaked.com
    serverlisten: "443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        backend: grafana
        custom_css: grafana/graforg.css
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        backend: grafana
        proxy_cache: True
      - name: favicon.ico
        docroot: "{{ nginx_default_docroot }}"
        proxy: True
        backend: grafana
        proxy_cache: True

  - servername: "home.prettybaked.com"
    serveralias: "prettybaked.com www.prettybaked.com {{ ansible_eth0.ipv4.address }}"
    serverlisten: "8443 default_server"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        docroot: "{{ data_mount_root }}/{{ www_directory }}"
        extra_parameters: |
          fancyindex on;
          fancyindex_localtime on; #on for local time zone. off for GMT
          fancyindex_exact_size off; #off for human-readable. on for exact size in bytes
          fancyindex_header "/fancyindex/header.html";
          fancyindex_footer "/fancyindex/footer.html";
          fancyindex_ignore "fancyindex"; #ignore this directory when showing list
          fancyindex_ignore "iot_firewall_allow.txt";
          fancyindex_ignore "fail2ban.txt";
          fancyindex_ignore "robots.txt";

  - servername: ci.prettybaked.com
    serverlisten: "8443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        backend: ci

  - servername: eddie.prettybaked.com
    serverlisten: "8443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        backend: eddie

  - servername: repo.prettybaked.com
    serverlisten: "8443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        backend: repo

  - servername: automation.prettybaked.com
    serverlisten: "8443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        backend: automation
        extra_parameters: |
          proxy_http_version         1.1;
          proxy_set_header       Connection          "upgrade";
          proxy_set_header        upgrade             $http_upgrade;
      - name: /api/websocket
        proxy: True
        backend: automation/api/websocket
        extra_parameters: |
          proxy_http_version         1.1;
          proxy_set_header       Connection          "upgrade";
          proxy_set_header        upgrade             $http_upgrade;

  - servername: ombi.prettybaked.com
    serverlisten: "8443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        backend: ombi
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        proxy_cache: True
        backend: ombi

  - servername: tautulli.prettybaked.com
    serverlisten: "8443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        proxy_cache: False
        backend: tautulli
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        proxy_cache: True
        backend: tautulli

  - servername: plex.prettybaked.com
    serverlisten: "8443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        proxy_cache: True
        backend: plex
        custom_css: plex/dark.css
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        proxy_cache: True
        backend: plex

  - servername: stats.prettybaked.com
    serverlisten: "8443"
    ssl_certchain: "{{ ssl_certchain }}"
    ssl_privkey: "{{ ssl_privkey }}"
    ssl_certpath: "{{ ssl_certpath }}"
    ssl_keypath: "{{ ssl_keypath }}"
    locations:
      - name: /
        proxy: True
        backend: grafana
        custom_css: grafana/graforg.css
      - name: "{{ nginx_proxy_cache_regex }}"
        proxy: True
        backend: grafana
        proxy_cache: True
      - name: favicon.ico
        docroot: "{{ nginx_default_docroot }}"
        proxy: True
        backend: grafana
        proxy_cache: True

iotfw_pfsense_ip: 10.0.10.1
iotfw_pfsense_user: fail2ban
iotfw_urltable_file: "{{ data_mount_root }}/{{ www_directory }}/iot_firewall_allow.txt"
iotfw_urltable_webserver_ip: 10.0.10.179
